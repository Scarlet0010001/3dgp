//
// Generated by Microsoft (R) HLSL Shader Compiler 10.1
//
//
// Note: shader requires additional functionality:
//       Early depth-stencil
//
//
// Buffer Definitions: 
//
// cbuffer SCENE_CONSTANTS
// {
//
//   row_major float4x4 view;           // Offset:    0 Size:    64 [unused]
//   row_major float4x4 projection;     // Offset:   64 Size:    64 [unused]
//   row_major float4x4 view_projection;// Offset:  128 Size:    64 [unused]
//   row_major float4x4 inverse_projection;// Offset:  192 Size:    64 [unused]
//   row_major float4x4 inverse_view_projection;// Offset:  256 Size:    64 [unused]
//   float4 directional_light_direction;// Offset:  320 Size:    16
//   float4 directional_light_color;    // Offset:  336 Size:    16
//   float4 omni_light_position;        // Offset:  352 Size:    16
//   float4 omni_light_color;           // Offset:  368 Size:    16
//   float4 rimlight_color;             // Offset:  384 Size:    16 [unused]
//   float4 camera_position;            // Offset:  400 Size:    16
//   float4 camera_focus;               // Offset:  416 Size:    16 [unused]
//   float4 avatar_position;            // Offset:  432 Size:    16 [unused]
//   float4 avatar_direction;           // Offset:  448 Size:    16 [unused]
//   float time;                        // Offset:  464 Size:     4 [unused]
//   float delta_time;                  // Offset:  468 Size:     4 [unused]
//   float wind_frequency;              // Offset:  472 Size:     4 [unused]
//   float wind_strength;               // Offset:  476 Size:     4 [unused]
//   float rimlight_factor;             // Offset:  480 Size:     4 [unused]
//   float snow_factor;                 // Offset:  484 Size:     4
//
// }
//
// cbuffer GRASS_CONSTANTS
// {
//
//   float grass_height_factor;         // Offset:    0 Size:     4 [unused]
//   float grass_width_factor;          // Offset:    4 Size:     4 [unused]
//   float grass_curvature;             // Offset:    8 Size:     4 [unused]
//   float grass_withered_factor;       // Offset:   12 Size:     4 [unused]
//   float grass_height_variance;       // Offset:   16 Size:     4 [unused]
//   float perlin_noise_distribution_factor;// Offset:   20 Size:     4 [unused]
//   float tesselation_max_subdivision; // Offset:   24 Size:     4 [unused]
//   float tesselation_max_distance;    // Offset:   28 Size:     4 [unused]
//   float4 grass_specular_color;       // Offset:   32 Size:    16
//
// }
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim      HLSL Bind  Count
// ------------------------------ ---------- ------- ----------- -------------- ------
// sampler_states[2]                 sampler      NA          NA             s2      1 
// texture_maps[0]                   texture  float4          2d             t0      1 
// SCENE_CONSTANTS                   cbuffer      NA          NA            cb3      1 
// GRASS_CONSTANTS                   cbuffer      NA          NA            cb4      1 
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_POSITION              0   xyzw        0      POS   float       
// POSITION                 0   xyzw        1     NONE   float   xyz 
// NORMAL                   0   xyzw        2     NONE   float   xyz 
// TEXCOORD                 0   xy          3     NONE   float   xy  
// COLOR                    0   xyzw        4     NONE   float   xyz 
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_TARGET                0   xyzw        0   TARGET   float   xyzw
//
ps_5_0
dcl_globalFlags refactoringAllowed | forceEarlyDepthStencil | skipOptimization
dcl_constantbuffer CB3[31], immediateIndexed
dcl_constantbuffer CB4[3], immediateIndexed
dcl_sampler s2, mode_default
dcl_resource_texture2d (float,float,float,float) t0
dcl_input_ps linear v1.xyz
dcl_input_ps linear v2.xyz
dcl_input_ps linear v3.xy
dcl_input_ps linear v4.xyz
dcl_output o0.xyzw
dcl_temps 7
//
// Initial variable locations:
//   v0.x <- pin.position.x; v0.y <- pin.position.y; v0.z <- pin.position.z; v0.w <- pin.position.w; 
//   v1.x <- pin.world_position.x; v1.y <- pin.world_position.y; v1.z <- pin.world_position.z; v1.w <- pin.world_position.w; 
//   v2.x <- pin.world_normal.x; v2.y <- pin.world_normal.y; v2.z <- pin.world_normal.z; v2.w <- pin.world_normal.w; 
//   v3.x <- pin.texcoord.x; v3.y <- pin.texcoord.y; 
//   v4.x <- pin.color.x; v4.y <- pin.color.y; v4.z <- pin.color.z; v4.w <- pin.color.w; 
//   o0.x <- <main return value>.x; o0.y <- <main return value>.y; o0.z <- <main return value>.z; o0.w <- <main return value>.w
//
#line 13 "C:\Users\2220411\Desktop\課題\自作ライブラリ\描画とゲープロmark2\描画とゲープロ\HLSL\grass_ps.hlsl"
nop 
sample_indexable(texture2d)(float,float,float,float) r0.xyzw, v3.xyxx, t0.xyzw, s2

#line 38 "C:\Users\2220411\Desktop\課題\自作ライブラリ\描画とゲープロmark2\描画とゲープロ\HLSL\rendering_equation.hlsli"
log r1.xyz, r0.xyzx
mul r1.xyz, r1.xyzx, l(2.200000, 2.200000, 2.200000, 0.000000)
exp r0.xyz, r1.xyzx  // r0.x <- <degamma return value>.x; r0.y <- <degamma return value>.y; r0.z <- <degamma return value>.z
mov r0.w, r0.w  // r0.w <- <degamma return value>.w

#line 13 "C:\Users\2220411\Desktop\課題\自作ライブラリ\描画とゲープロmark2\描画とゲープロ\HLSL\grass_ps.hlsl"
mov r0.xyzw, r0.xyzw  // r0.x <- base_color.x; r0.y <- base_color.y; r0.z <- base_color.z; r0.w <- base_color.w

#line 14
mov r0.w, r0.w  // r0.w <- alpha

#line 16
dp3 r1.x, v2.xyzx, v2.xyzx
rsq r1.x, r1.x
mul r1.xyz, r1.xxxx, v2.xyzx  // r1.x <- N.x; r1.y <- N.y; r1.z <- N.z

#line 17
mov r2.xyz, -v1.xyzx
add r2.xyz, r2.xyzx, cb3[25].xyzx
dp3 r1.w, r2.xyzx, r2.xyzx
rsq r1.w, r1.w
mul r2.xyz, r1.wwww, r2.xyzx  // r2.x <- V.x; r2.y <- V.y; r2.z <- V.z

#line 19
add r0.xyz, r0.xyzx, v4.xyzx
max r0.xyz, r0.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
min r0.xyz, r0.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)  // r0.x <- grass_withered_color.x; r0.y <- grass_withered_color.y; r0.z <- grass_withered_color.z

#line 20
mul r3.xyz, r0.xyzx, l(0.200000, 0.200000, 0.200000, 0.000000)
mov r4.xyz, -r0.xyzx
add r3.xyz, r3.xyzx, r4.xyzx
mul r3.xyz, r3.xyzx, v3.yyyy
add r0.xyz, r0.xyzx, r3.xyzx  // r0.x <- diffuse_color.x; r0.y <- diffuse_color.y; r0.z <- diffuse_color.z

#line 22
mov r1.w, -v3.y
add r1.w, r1.w, l(1.200000)
mov r1.w, -r1.w
mul r1.w, r1.w, cb3[30].y
mul r1.w, r1.w, l(1.442695)
exp r1.w, r1.w
mov r3.xyz, l(-0.750000,-0.750000,-0.750000,-0.000000)
add r0.xyz, r0.xyzx, r3.xyzx
mul r0.xyz, r0.xyzx, r1.wwww
add r0.xyz, r0.xyzx, l(0.750000, 0.750000, 0.750000, 0.000000)  // r0.x <- diffuse_color.x; r0.y <- diffuse_color.y; r0.z <- diffuse_color.z

#line 32
mov r1.w, -v3.y
mul r1.w, r1.w, l(0.001000)
mul r1.w, r1.w, l(1.442695)
exp r1.w, r1.w  // r1.w <- specular_intensity

#line 34
mov r3.xyzw, cb4[2].xyzw  // r3.x <- specular_color.x; r3.y <- specular_color.y; r3.z <- specular_color.z; r3.w <- specular_color.w

#line 37
mov r4.xyz, l(0,0,0,0)  // r4.x <- radiance.x; r4.y <- radiance.y; r4.z <- radiance.z

#line 42
mov r5.xyz, -cb3[20].xyzx
dp3 r2.w, r5.xyzx, r5.xyzx
rsq r2.w, r2.w
mul r5.xyz, r2.wwww, r5.xyzx  // r5.x <- L.x; r5.y <- L.y; r5.z <- L.z

#line 43
itof r2.w, l(0)
dp3 r4.w, r1.xyzx, r5.xyzx
mul r4.w, r4.w, l(0.500000)
add r4.w, r4.w, l(0.500000)
max r2.w, r2.w, r4.w
mul r6.xyz, r0.xyzx, r2.wwww  // r6.x <- diffuse.x; r6.y <- diffuse.y; r6.z <- diffuse.z

#line 44
itof r2.w, l(0)
add r5.xyz, r2.xyzx, r5.xyzx
dp3 r4.w, r5.xyzx, r5.xyzx
rsq r4.w, r4.w
mul r5.xyz, r4.wwww, r5.xyzx
dp3 r4.w, r1.xyzx, r5.xyzx
max r2.w, r2.w, r4.w
itof r4.w, l(32)
log r2.w, r2.w
mul r2.w, r2.w, r4.w
exp r2.w, r2.w
mul r2.w, r1.w, r2.w
mul r5.xyz, r3.xyzx, r2.wwww
mul r5.xyz, r3.wwww, r5.xyzx  // r5.x <- specular.x; r5.y <- specular.y; r5.z <- specular.z

#line 45
add r5.xyz, r5.xyzx, r6.xyzx
mul r5.xyz, r5.xyzx, cb3[21].xyzx
mul r5.xyz, r5.xyzx, cb3[21].wwww
add r4.xyz, r4.xyzx, r5.xyzx

#line 48
mov r5.xyz, -v1.xyzx
add r5.xyz, r5.xyzx, cb3[22].xyzx  // r5.x <- L.x; r5.y <- L.y; r5.z <- L.z

#line 49
dp3 r2.w, r5.xyzx, r5.xyzx
sqrt r2.w, r2.w  // r2.w <- d

#line 50
dp3 r4.w, r5.xyzx, r5.xyzx
rsq r4.w, r4.w
mul r5.xyz, r4.wwww, r5.xyzx

#line 66
mov r4.w, l(1.000000)  // r4.w <- Kc

#line 67
mov r5.w, l(0.045000)  // r5.w <- Kl

#line 68
mov r6.x, l(0.007500)  // r6.x <- Kq

#line 69
mul r5.w, r2.w, r5.w
add r4.w, r4.w, r5.w
mul r2.w, r2.w, r2.w
mul r2.w, r2.w, r6.x
add r2.w, r2.w, r4.w
div r2.w, l(1.000000), r2.w
max r2.w, r2.w, l(0.000000)
min r2.w, r2.w, l(1.000000)  // r2.w <- attenuation

#line 70
itof r4.w, l(0)
dp3 r5.w, r1.xyzx, r5.xyzx
mul r5.w, r5.w, l(0.500000)
add r5.w, r5.w, l(0.500000)
max r4.w, r4.w, r5.w
mul r6.xyz, r0.xyzx, r4.wwww  // r6.x <- diffuse.x

#line 71
itof r4.w, l(0)
add r2.xyz, r2.xyzx, r5.xyzx
dp3 r5.x, r2.xyzx, r2.xyzx
rsq r5.x, r5.x
mul r2.xyz, r2.xyzx, r5.xxxx
dp3 r1.x, r1.xyzx, r2.xyzx
max r1.x, r1.x, r4.w
itof r1.y, l(32)
log r1.x, r1.x
mul r1.x, r1.x, r1.y
exp r1.x, r1.x
mul r1.x, r1.w, r1.x
mul r1.xyz, r3.xyzx, r1.xxxx
mul r1.xyz, r3.wwww, r1.xyzx
mul r1.xyz, r1.xyzx, l(0.150000, 0.150000, 0.150000, 0.000000)  // r1.x <- specular.x; r1.y <- specular.y; r1.z <- specular.z

#line 73
add r1.xyz, r1.xyzx, r6.xyzx
mul r1.xyz, r1.xyzx, cb3[23].xyzx
mul r1.xyz, r1.xyzx, cb3[23].wwww
mul r1.xyz, r2.wwww, r1.xyzx
mul r1.xyz, r1.xyzx, l(0.200000, 0.200000, 0.200000, 0.000000)
add r1.xyz, r1.xyzx, r4.xyzx  // r1.x <- radiance.x; r1.y <- radiance.y; r1.z <- radiance.z

#line 75
mul r0.xyz, r0.xyzx, l(0.200000, 0.200000, 0.200000, 0.000000)  // r0.x <- ambient.x; r0.y <- ambient.y; r0.z <- ambient.z

#line 76
add r0.xyz, r0.xyzx, r1.xyzx  // r0.x <- radiance.x; r0.y <- radiance.y; r0.z <- radiance.z

#line 78
itof r1.xyz, l(0, 0, 0, 0)
max o0.xyz, r0.xyzx, r1.xyzx
mov o0.w, r0.w
ret 
// Approximately 119 instruction slots used
